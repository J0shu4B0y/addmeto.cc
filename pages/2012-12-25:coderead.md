# Чтение кода

Многим из вас часто приходится читать чужой (или старый, но свой) код. Умение вчитываться в чужие реализации - важный навык для хорошего разработчика. Не только потому, что это помогает быстрее освоиться в проекте, но и потому, что чтение хорошего кода - один из лучших способов учиться. Вот несколько советов, которые, как мне кажется, помогут вам читать чужой код с большей пользой.

![center](/images/2012-12-25-coderead/berestyanoe-pismo.jpg)

### 1. Найдите свою собственную точку входа

Редко бывает, что вам нужно изучить весь проект целиком. Обычно интересны какие-то мелочи, такие, как особенности реализации строки в вашей версии STL или почему gnu grep настолько быстрее его freebsd аналога. Чаще всего спасает банальный поиск по исходным текстам, найти конкретную имплементацию и заглянуть внутрь. В более или менее современных программах можно найти тесты, проверяющие интересную вам функциональность и уже из них выйти на нужные вам функции.

Важно максимально сконцентрироваться на том, что действительно интересно и не уходить далеко вглубь. Я понял это в 2007ом году, когда, копаясь во внутренностях libc, внезапно оказался где-то внутри IP стека Linux. Вообще, wikipedia-браузинг плох в любом его проявлении.

### 2. Взаимодействуйте с кодом

В большинстве случаев есть возможность не просто читать, но и взаимодействовать с кодом. Особенно это легко дается средам, в которых есть интерактивный шелл, REPL. Особенно красиво это было во времена, когда еще в ходу был Smalltalk, но и сейчас всё неплохо. В компилируемых языках, чтобы разобраться в коде, я использую отладочную печать. Исправить в коде пару строк, понавставлять принтов, собрать, запустить и посмотреть что получилось - это мой метод :) Да, бывает и [нормальный, красивый код](http://ioccc.org/2011/dlowe/dlowe.c), однако даже его иногда нелегко читать. Взаимодействие с кодом и запуск небольших тестовых программ сильно облегчает задачу.

### 3. Разделяй и властвуй

Частью политики вовлечения себя в код обычно является практика написания небольших программок. Я, в отличие от многих, проповедую половинное деления кода. Т.е., буквально, если я где-то застрял - я стараюсь разделить большую функцию на две маленьких, и понять, как они работают. Мало того, что это очень полезный сам по себе рефакторинг, это также позволяет обложить обе функции тестами. Причем тут чтение, скажете вы? Дело в том, что чтение кода подразумевает его понимание. А как еще понимать программу, если вы не можете с ней ничего сделать? Поэтому я засучиваю рукава и, приговаривая «я тебя не знаю, но я тебя срефакторю!», берусь за деление надвое. :)

### 4. Оставляйте записи

Обычно вместе с разбирательством в коде у меня открыта вкладка SublimeText2 с режимом PlainTasks. В нее я заношу все мои открытия по читаемому коду. Вовсе не обязательно, чтобы эти заметки были понятны постороннему, это же не документация. Важно, чтобы вы могли прочитать эти записи даже через год. Например, в этот день год назад первая строчка файла FFTM.explain у меня вот такая: «В майне есть fftm_plain_linear, только он ни фига не linear, а O(n^2)».  Вам, может быть, и не понятно, а я всё понял :) Тогда мой сетап немного отличался, это был org-mode для Emacs, но суть от этого не изменилась.

Вообще, завершая эту тему, оставлять записи по любому поводу - очень правильная, годная привычка. Заведите себе её обязательно. Ну, например, пообещайте себе всё записывать с Нового Года :)

<small>weakly-базируется на тексте [Code Reading](http://spin.atomicobject.com/2012/12/23/code-reading/) by Scott Vokes</small>
